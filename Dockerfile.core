# Dockerfile.core - The Brain ðŸ§ 
FROM python:3.12-slim

# Install system dependencies
RUN apt-get update && apt-get install -y git build-essential sqlite3 && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Install dependencies directly with pip
RUN pip install --no-cache-dir \
    fastapi \
    "uvicorn[standard]" \
    typing-extensions \
    openai \
    typer \
    rich \
    prompt_toolkit \
    pydantic \
    duckduckgo-search \
    chromadb \
    tiktoken \
    python-dotenv \
    sentence-transformers \
    mcp \
    docker

# Copy source code
COPY nebulus_atom ./nebulus_atom
COPY CONTEXT.md .

# Set PYTHONPATH
ENV PYTHONPATH=/app

# Expose API port
EXPOSE 8000

# Run the server
CMD ["uvicorn", "nebulus_atom.server:app", "--host", "0.0.0.0", "--port", "8000"]
